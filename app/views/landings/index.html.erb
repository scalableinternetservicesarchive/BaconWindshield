<div class="jumbotron">
	<div class="row">
		<div class="col-md-4 col-md-offset-2">
			<div class="inner">
				<!-- <input type="button" value="Get nearest spots" onclick="getLocation()"/> -->
				<!-- js created table inserted here -->
			</div>
		</div>
		<div class="col-md-4">
			<table class="table table-hover table-striped">	
					<thead>
						<tr>
							<th>Favorite spots
							<% if defined?(Devise)%>
							<% if user_signed_in?%>
								<%= link_to 'Manage favorites',  favorites_path, class: "btn btn-primary btn-xs pull-right" %> </th>
							<%end%>
							<%end%>
						</tr>
					</thead>
				<tbody>
						<% if defined?(Devise)%>
						<% if user_signed_in?%>
						<% current_user.favorites.limit(5).each do |favorite| %>
						<tr>
							<% location = Location.find(favorite.location_id) %>
							<% wave = location.infos %>
							<td><%= link_to location.name, location %>
									<% shape = wave[0].shape_full %>
									<font color = "blue">
										<% case shape %>
										  	<% when "Poor" %>
										  		<span class="fa fa-star"></span>
										  	<% when "Poor-Fair" %>
										  		<span class="fa fa-star"></span><span class="fa fa-star"></span>
										  	<% when "Fair" %>
											  	<span class "fa fa-star"></span><span class "fa fa-star"></span><span class "fa fa-star"></span>
										  	<% when "Fair-Good" %>
										  		<span class "fa fa-star"></span><span class "fa fa-star"></span><span class "fa fa-star"></span><span class "fa fa-star"></span>
										  	<% when "Good" %>
										  	<% else %>	 									
										<% end %>
									</font>	
									Swell hight: <%= size = wave[0].size %>
							</td>
						</tr>
						<% end %>
						<% else %>
						<td>You need to log in to use this feature!</td>
						<% end %>
						<% end %>
				</tbody>
			</table>
		</div>
	</div>

	<script type="text/javascript" href="/app/assets/javascripts/nearest_locations.js"></script>
	<!-- <%= javascript_include_tag "nearest_locations", "data-turbolinks-track" => true %> -->
	<!-- pipelining nearby_locations makes it being called 3 times instead of 1, so just leaving this here for future reference -->
	
	<script type="text/javascript"src="https://maps.googleapis.com/maps/api/js?key=AIzaSyARk-UZoJMXrtZU1dnuUDXysY1eRUYd6gg&sensor=false&callback=initialize1"></script>

	<!-- <script type="text/javascript" href="/app/assets/javascripts/google_maps.js"></script> -->
	<%= javascript_include_tag "google_maps", "data-turbolinks-track" => true %>

	<div class="google-maps-canvas1" id="map-canvas1"></div>
</div>